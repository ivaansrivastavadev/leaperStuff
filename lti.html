<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeprTimer (LTI)</title>
    <style>
        /* Base styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background-color: #0a0a0a;
            color: #d0d0d0;
            overflow: hidden;
            user-select: none;
            width: 100%; !important
            height: 100%; !important
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* CRT container */
        .crt-container {
            width: 90%;
            height: 90%;
            background-color: #111;
            border: 2px solid #333;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }
        
        /* CRT scanlines effect */
        .crt-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15) 0px,
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 10;
        }
        
        /* CRT flicker animation */
        @keyframes flicker {
            0% { opacity: 0.97; }
            5% { opacity: 0.95; }
            10% { opacity: 0.98; }
            15% { opacity: 0.96; }
            20% { opacity: 0.99; }
            50% { opacity: 0.97; }
            100% { opacity: 0.98; }
        }
        
        .crt-container {
            animation: flicker 0.15s infinite;
        }
        
        /* App layout */
        .app {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            padding: 10px;
        }
        
        /* Top bar - hidden by default */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(20, 20, 20, 0.9);
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 5;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
            border-bottom: 1px solid #333;
        }
        
        .app:hover .top-bar {
            transform: translateY(0);
        }
        
        .brand {
            font-weight: bold;
            color: #d0a040;
        }
        
        .top-controls {
            display: flex;
            gap: 10px;
        }
        
        /* Bottom bar - hidden by default */
        .bottom-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(20, 20, 20, 0.9);
            padding: 3px 10px;
            text-align: center;
            font-size: 0.8em;
            z-index: 5;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            border-top: 1px solid #333;
        }
        
        .app:hover .bottom-bar {
            transform: translateY(0);
        }
        
        /* Sidebar - hidden by default */
        .sidebar {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 120px;
            background-color: rgba(20, 20, 20, 0.9);
            padding: 10px;
            z-index: 5;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            border-left: 1px solid #333;
            overflow-y: auto;
        }
        
        .app:hover .sidebar {
            transform: translateX(0);
        }
        
        .timer-list {
            list-style: none;
        }
        
        .timer-item {
            padding: 5px;
            margin-bottom: 5px;
            background-color: rgba(40, 40, 40, 0.7);
            border: 1px solid #444;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .timer-item:hover {
            background-color: rgba(60, 60, 60, 0.7);
            border-color: #d0a040;
        }
        
        /* Main content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            padding: 10px;
        }
        
        .timer-display {
            font-size: 2.5em;
            font-weight: bold;
            color: #d0a040;
            margin-bottom: 10px;
            text-shadow: 0 0 5px rgba(208, 160, 64, 0.5);
            letter-spacing: 2px;
        }
        
        .colon {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .timer-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #222;
            border: 1px solid #444;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #d0a040;
            width: 0%;
            transition: width 0.5s linear;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .btn {
            padding: 5px 10px;
            background-color: #222;
            border: 1px solid #444;
            color: #d0d0d0;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background-color: #333;
            border-color: #d0a040;
        }
        
        .btn:active {
            background-color: #444;
        }
        
        /* Store modal */
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 10, 10, 0.95);
            z-index: 20;
            display: none;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #333;
        }
        
        .modal-title {
            font-size: 1.2em;
            color: #d0a040;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: #d0d0d0;
            font-size: 1.2em;
            cursor: pointer;
        }
        
        .watch-styles {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .watch-style {
            padding: 10px;
            background-color: #222;
            border: 1px solid #444;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .watch-style:hover {
            background-color: #333;
            border-color: #d0a040;
        }
        
        .watch-style.unlocked {
            border-color: #40a040;
        }
        
        .watch-style.selected {
            border-color: #d0a040;
            background-color: #2a2a15;
        }
        
        .watch-style.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .style-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .style-price {
            font-size: 0.9em;
            color: #d0a040;
        }
        
        .coin-counter {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #d0a040;
        }
        
        /* Watch style variations */
        .watch-style-default .timer-display {
            color: #d0a040;
        }
        
        .watch-style-terminal .timer-display {
            color: #40a040;
            text-shadow: 0 0 5px rgba(64, 160, 64, 0.5);
        }
        
        .watch-style-amber .timer-display {
            color: #ffa500;
            text-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
        }
        
        .watch-style-blue .timer-display {
            color: #5a9bd5;
            text-shadow: 0 0 5px rgba(90, 155, 213, 0.5);
        }
        
        .watch-style-matrix .timer-display {
            color: #00ff41;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);
        }
        
        /* Confirmation dialog */
        .confirmation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #222;
            border: 2px solid #444;
            padding: 15px;
            z-index: 30;
            display: none;
            flex-direction: column;
            gap: 10px;
            width: 250px;
        }
        
        .confirmation.active {
            display: flex;
        }
        
        .confirmation-text {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .confirmation-buttons {
            display: flex;
            justify-content: space-between;
        }
        
        /* Power on animation */
        @keyframes powerOn {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .crt-container {
            animation: powerOn 0.5s ease-out, flicker 0.15s infinite;
        }
    </style>
</head>
<body>
    <div class="crt-container">
        <div class="app">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="brand">leaperStuff</div>
                <button class="btn" id="storeBtn">Store</button>
                                    <button class="btn" id="homeBtn">Home</button>
                <div class="top-controls">

                    <div class="coin-counter">
                        <span id="coinCount">0</span> coins
                    </div>
                    
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <div class="timer-display" id="timerDisplay">25:00</div>
                
                <div class="timer-info">
                    <div>Time left: <span id="timeLeft">25:00</span></div>
                    <div>Elapsed: <span id="elapsedTime">00:00</span></div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="controls">
                    <button class="btn" id="pauseBtn">Pause</button>
                    <button class="btn" id="resumeBtn">Resume</button>
                    <button class="btn" id="resetBtn">Reset</button>
                </div>
                
                <div class="timer-info">
                    <div>Coins: <span id="coinsDisplay">0</span></div>
                    <div>Style: <span id="currentStyle">Default</span></div>
                </div>
                
                <div class="style-selector">
                    <button class="btn" id="changeStyleBtn">Change Style</button>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <h3>Timers</h3>
                <ul class="timer-list" id="timerList">
                    <li class="timer-item" data-time="300">5 min - Quick Break</li>
                    <li class="timer-item" data-time="1500">25 min - Pomodoro</li>
                    <li class="timer-item" data-time="1800">30 min - Focus Session</li>
                    <li class="timer-item" data-time="3600">60 min - Deep Work</li>
                    <li class="timer-item" data-time="7200">120 min</li>
                    <li class="timer-item" data-time="10800">180 min</li>
</input></li>
                </ul>
            </div>
            
            <!-- Bottom Bar -->
            <div class="bottom-bar">
                © 2023 leaperStuff. All rights reserved.
            </div>
            
            <!-- Store Modal -->
            <div class="modal" id="storeModal">
                <div class="modal-header">
                    <div class="modal-title">Watch Style Store</div>
                    <button class="close-btn" id="closeStoreBtn">✕</button>
                </div>
                <div class="coin-counter">
                    Your coins: <span id="storeCoinCount">0</span>
                </div>
                <div class="watch-styles" id="watchStyles">
                    <!-- Watch styles will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Style Selector Modal -->
            <div class="modal" id="styleModal">
                <div class="modal-header">
                    <div class="modal-title">Select Watch Style</div>
                    <button class="close-btn" id="closeStyleBtn">✕</button>
                </div>
                <div class="watch-styles" id="styleSelector">
                    <!-- Styles will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Confirmation Dialog -->
            <div class="confirmation" id="confirmationDialog">
                <div class="confirmation-text" id="confirmationText">Are you sure you want to purchase this style?</div>
                <div class="confirmation-buttons">
                    <button class="btn" id="confirmYes">Yes</button>
                    <button class="btn" id="confirmNo">No</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // App state
        const state = {
            coins: 0,
            currentTimer: 1500, // 25 minutes in seconds
            elapsedTime: 0,
            isRunning: false,
            currentStyle: 'default',
            unlockedStyles: ['default'],
            timerInterval: null,
            coinInterval: null,
            selectedStyleForPurchase: null
        };

        // Watch styles data
        const watchStyles = [
            { id: 'default', name: 'Default', price: 0, color: '#d0a040' },
            { id: 'terminal', name: 'Terminal Green', price: 300, color: '#40a040' },
            { id: 'amber', name: 'Amber', price: 350, color: '#ffa500' },
            { id: 'blue', name: 'Blue', price: 400, color: '#5a9bd5' },
            { id: 'matrix', name: 'Matrix', price: 500, color: '#00ff41' }
        ];

        // DOM elements
        const elements = {
            timerDisplay: document.getElementById('timerDisplay'),
            timeLeft: document.getElementById('timeLeft'),
            elapsedTime: document.getElementById('elapsedTime'),
            progressFill: document.getElementById('progressFill'),
            coinCount: document.getElementById('coinCount'),
            coinsDisplay: document.getElementById('coinsDisplay'),
            storeCoinCount: document.getElementById('storeCoinCount'),
            currentStyle: document.getElementById('currentStyle'),
            timerList: document.getElementById('timerList'),
            watchStyles: document.getElementById('watchStyles'),
            styleSelector: document.getElementById('styleSelector'),
            storeModal: document.getElementById('storeModal'),
            styleModal: document.getElementById('styleModal'),
            confirmationDialog: document.getElementById('confirmationDialog'),
            confirmationText: document.getElementById('confirmationText'),
            pauseBtn: document.getElementById('pauseBtn'),
            resumeBtn: document.getElementById('resumeBtn'),
            resetBtn: document.getElementById('resetBtn'),
            changeStyleBtn: document.getElementById('changeStyleBtn'),
            storeBtn: document.getElementById('storeBtn'),
            homeBtn: document.getElementById('homeBtn'),
            closeStoreBtn: document.getElementById('closeStoreBtn'),
            closeStyleBtn: document.getElementById('closeStyleBtn'),
            confirmYes: document.getElementById('confirmYes'),
            confirmNo: document.getElementById('confirmNo')
        };

        // Initialize the application
        function init() {
            loadState();
            renderWatchStyles();
            renderStyleSelector();
            updateDisplay();
            setupEventListeners();
            
            // Start with timer paused
            pauseTimer();
        }

        // Load state from localStorage
        function loadState() {
            const savedState = localStorage.getItem('leprTimerState');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                state.coins = parsed.coins || 0;
                state.currentTimer = parsed.currentTimer || 1500;
                state.elapsedTime = parsed.elapsedTime || 0;
                state.currentStyle = parsed.currentStyle || 'default';
                state.unlockedStyles = parsed.unlockedStyles || ['default'];
            }
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('leprTimerState', JSON.stringify(state));
        }

        // Format time in MM:SS format
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // Update the display with current state
        function updateDisplay() {
            const timeLeft = state.currentTimer - state.elapsedTime;
            
            // Update timer display
            elements.timerDisplay.textContent = formatTime(timeLeft);
            elements.timeLeft.textContent = formatTime(timeLeft);
            elements.elapsedTime.textContent = formatTime(state.elapsedTime);
            
            // Update progress bar
            const progress = (state.elapsedTime / state.currentTimer) * 100;
            elements.progressFill.style.width = `${progress}%`;
            
            // Update coin displays
            elements.coinCount.textContent = state.coins;
            elements.coinsDisplay.textContent = state.coins;
            elements.storeCoinCount.textContent = state.coins;
            
            // Update current style display
            const currentStyleObj = watchStyles.find(style => style.id === state.currentStyle);
            elements.currentStyle.textContent = currentStyleObj ? currentStyleObj.name : 'Default';
            
            // Apply current watch style
            document.querySelector('.main-content').className = 'main-content';
            document.querySelector('.main-content').classList.add(`watch-style-${state.currentStyle}`);
        }

        // Start the timer
        function startTimer() {
            if (state.isRunning) return;
            
            state.isRunning = true;
            
            // Timer interval
            state.timerInterval = setInterval(() => {
                state.elapsedTime++;
                updateDisplay();
                
                // Check if timer is complete
                if (state.elapsedTime >= state.currentTimer) {
                    timerComplete();
                }
            }, 1000);
            
            // Coin earning interval (5 coins per minute)
            state.coinInterval = setInterval(() => {
                state.coins += 5;
                updateDisplay();
                saveState();
            }, 60000); // 1 minute
        }

        // Pause the timer
        function pauseTimer() {
            state.isRunning = false;
            
            if (state.timerInterval) {
                clearInterval(state.timerInterval);
                state.timerInterval = null;
            }
            
            if (state.coinInterval) {
                clearInterval(state.coinInterval);
                state.coinInterval = null;
            }
            
            saveState();
        }

        // Reset the timer
        function resetTimer() {
            pauseTimer();
            state.elapsedTime = 0;
            updateDisplay();
            saveState();
        }

        // Handle timer completion
        function timerComplete() {
            pauseTimer();
            // In a real app, you might play a sound or show a notification here
            alert('Timer complete!'); // Simple alert for demo purposes
        }

        // Render watch styles in the store
        function renderWatchStyles() {
            elements.watchStyles.innerHTML = '';
            
            watchStyles.forEach(style => {
                const isUnlocked = state.unlockedStyles.includes(style.id);
                const isSelected = state.currentStyle === style.id;
                
                const styleElement = document.createElement('div');
                styleElement.className = `watch-style ${isUnlocked ? 'unlocked' : 'locked'} ${isSelected ? 'selected' : ''}`;
                styleElement.innerHTML = `
                    <div class="style-name">${style.name}</div>
                    <div class="style-price">${isUnlocked ? 'Unlocked' : `${style.price} coins`}</div>
                `;
                
                if (isUnlocked) {
                    styleElement.addEventListener('click', () => selectStyle(style.id));
                } else {
                    styleElement.addEventListener('click', () => confirmPurchase(style));
                }
                
                elements.watchStyles.appendChild(styleElement);
            });
        }

        // Render style selector
        function renderStyleSelector() {
            elements.styleSelector.innerHTML = '';
            
            watchStyles.forEach(style => {
                if (state.unlockedStyles.includes(style.id)) {
                    const isSelected = state.currentStyle === style.id;
                    
                    const styleElement = document.createElement('div');
                    styleElement.className = `watch-style ${isSelected ? 'selected' : ''}`;
                    styleElement.innerHTML = `
                        <div class="style-name">${style.name}</div>
                    `;
                    
                    styleElement.addEventListener('click', () => selectStyle(style.id));
                    
                    elements.styleSelector.appendChild(styleElement);
                }
            });
        }

        // Select a watch style
        function selectStyle(styleId) {
            state.currentStyle = styleId;
            updateDisplay();
            saveState();
            renderWatchStyles();
            renderStyleSelector();
            
            // Close modals if open
            elements.storeModal.classList.remove('active');
            elements.styleModal.classList.remove('active');
        }

        // Confirm purchase of a watch style
        function confirmPurchase(style) {
            if (state.coins >= style.price) {
                state.selectedStyleForPurchase = style;
                elements.confirmationText.textContent = `Purchase "${style.name}" for ${style.price} coins?`;
                elements.confirmationDialog.classList.add('active');
            } else {
                alert(`Not enough coins! You need ${style.price} coins but only have ${state.coins}.`);
            }
        }

        // Purchase a watch style
        function purchaseStyle() {
            if (state.selectedStyleForPurchase && state.coins >= state.selectedStyleForPurchase.price) {
                state.coins -= state.selectedStyleForPurchase.price;
                state.unlockedStyles.push(state.selectedStyleForPurchase.id);
                selectStyle(state.selectedStyleForPurchase.id);
                state.selectedStyleForPurchase = null;
                updateDisplay();
                saveState();
                renderWatchStyles();
                renderStyleSelector();
            }
            
            elements.confirmationDialog.classList.remove('active');
        }

        // Set up event listeners
        function setupEventListeners() {
            // Timer controls
            elements.pauseBtn.addEventListener('click', pauseTimer);
            elements.resumeBtn.addEventListener('click', startTimer);
            elements.resetBtn.addEventListener('click', resetTimer);
            
            // Style controls
            elements.changeStyleBtn.addEventListener('click', () => {
                elements.styleModal.classList.add('active');
            });
            
            // Store controls
            elements.storeBtn.addEventListener('click', () => {
                elements.storeModal.classList.add('active');
            });
            
            elements.homeBtn.addEventListener('click', () => {
                // In a real app, this would navigate to a home page
                alert('Home button clicked');
            });
            
            // Modal controls
            elements.closeStoreBtn.addEventListener('click', () => {
                elements.storeModal.classList.remove('active');
            });
            
            elements.closeStyleBtn.addEventListener('click', () => {
                elements.styleModal.classList.remove('active');
            });
            
            // Timer list
            elements.timerList.addEventListener('click', (e) => {
                if (e.target.classList.contains('timer-item')) {
                    const time = parseInt(e.target.getAttribute('data-time'));
                    state.currentTimer = time;
                    resetTimer();
                    updateDisplay();
                    saveState();
                }
            });
            
            // Confirmation dialog
            elements.confirmYes.addEventListener('click', purchaseStyle);
            elements.confirmNo.addEventListener('click', () => {
                elements.confirmationDialog.classList.remove('active');
                state.selectedStyleForPurchase = null;
            });
            
            // Close modals when clicking outside
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });
        }
        
        elements.timerList.addEventListener('click', (e) => {
    const item = e.target.closest('.timer-item');
    if (!item) return;

    const value = item.getAttribute('data-time');

    if (value === 'custom') {
        const customSeconds = Number(document.getElementById('time').value);
        if (!customSeconds || customSeconds < 1) return;
        state.currentTimer = customSeconds;
    } else {
        state.currentTimer = Number(value);
    }

    state.elapsedTime = 0;
    updateDisplay();
    saveState();
});


        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
