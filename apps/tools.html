<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="../assets/roundedlogo.gif" type="image/x-icon" />
  <title>LeaperStuff — Tools</title>

  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    .tool-card {
      display: flex;
      flex-direction: column;
      height: 100%;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
    }
    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
    .card-title { margin: 0; flex: 1; font-size: 1.25rem; }
    
    .fav-btn {
      background: none;
      border: none;
      color: #ccc;
      cursor: pointer;
      font-size: 1.2rem;
      transition: color 0.3s;
      padding: 0 0 0 10px;
    }
    .fav-btn.active { color: #ef476f; }

    .badge { padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-left: 5px; }
    .badge-primary { background: var(--color1); color: white; }
    
    .tool-card p { flex: 1; margin-bottom: 1.5rem; opacity: 0.9; }
    .tool-card .btn { margin-top: auto; width: 100%; }
    
    .stats-info { font-size: 0.7rem; opacity: 0.5; margin-top: 10px; text-align: right; }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-container">
      <a href="../index.html" class="navbar-brand">leaperStuff</a>
      <ul class="navbar-nav">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../index.html#contact">Contact</a></li>
      </ul>
    </div>
  </nav>

  

  <main class="page" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
    <section class="hero card text-center">
      <h1 style="font-size: 2.5rem; margin-bottom: 1rem; color: var(--color1);">Tools Library</h1>
      <p style="font-size: 1.2rem;">Your most used tools will automatically move to the top.</p>
    </section>

    <section class="card text-center">
      <div class="form-group">
        <input id="tool-search" type="text" class="form-control" placeholder="Search tools..." style="text-align: center;" />
      </div>
    </section>
<div id="ad-container"></div><script src="/main/ad.js"></script> 

    <section class="features" id="tool-grid"></section>

    <footer class="glass text-center" style="margin-top: 4rem; padding: 2rem 0;">
      <p>© 2025 LeaperStuff. All rights reserved.</p>
    </footer>
  </main>

  <script>
    // 1. Initial Tool Data
    const baseTools = [
      { id: "zencode", title: "ZenCodeEdit", icon: "fa-code", desc: "The Editor for Peace.", link: "https://zencodeedit.vercel.app", tags: "editor code zen" },
      { id: "chatgun", title: "leaperChatGun", icon: "fa-comments", desc: "Chat to a friend without login.", link: "chatgun/leaperchatgun.html", tags: "chat messaging anonymous" },
      { id: "cava", title: "CAVA Web", icon: "fa-music", desc: "UnOfficial CAVA Web visualizer.", link: "cava/cava_web_unofficial.html", tags: "audio visualizer music" },
      { id: "infetch", title: "inFetch", icon: "fa-terminal", desc: "Like neofetch but only ASCII.", link: "infetch/infetch.html", tags: "system fetch terminal" },
      { id: "visuals", title: "leprVisuals", icon: "fa-chart-bar", desc: "Cool Chart maker for your data.", link: "visuals/visuals.html", badge: "Popular", tags: "chart data visuals" },
      { id: "hypr", title: "leprHypr", icon: "fa-desktop", desc: "Cool Desktop Environment experience.", link: "hyprlepr.html", badge: "Linux", tags: "linux desktop de" },
      { id: "dash", title: "leaperDash", icon: "fa-tachometer-alt", desc: "Quick access dashboard for system info.", link: "leprdash.html", tags: "dashboard stats" },
      { id: "lti", title: "LeprTimer", icon: "fa-clock", desc: "Simple and efficient retro timer.", link: "lti/lti.html", tags: "timer clock lti" },
      { id: "notes", title: "leprNotes", icon: "fa-file-lines", desc: "A clean and fast notes app.", link: "notes/notes.html", tags: "notes taking notepad" },
      { id: "vault", title: "leprVault", icon: "fa-vault", desc: "Secure Encrypter and Decrypter.", link: "vault.html", tags: "encrypt decrypt security" },
      { id: "mark", title: "leprMark", icon: "fa-gauge-high", desc: "Industrial hardware benchmark test.", link: "leprmark/leprmark.html", badge: "Extreme", tags: "benchmark stress test gpu cpu" }
    ];

    // 2. Load User Data from LocalStorage
    let userStats = JSON.parse(localStorage.getItem('leaperStats')) || {};
    let favorites = JSON.parse(localStorage.getItem('leaperFavs')) || [];

    const grid = document.getElementById('tool-grid');
    const search = document.getElementById('tool-search');

    function handleToolClick(id, url) {
        userStats[id] = (userStats[id] || 0) + 1;
        localStorage.setItem('leaperStats', JSON.stringify(userStats));
        window.location.href = url;
    }

    function toggleFav(id, e) {
        e.stopPropagation();
        const index = favorites.indexOf(id);
        if (index > -1) favorites.splice(index, 1);
        else favorites.push(id);
        localStorage.setItem('leaperFavs', JSON.stringify(favorites));
        displayTools(search.value);
    }

    function displayTools(query = "") {
      grid.innerHTML = "";

      // Sort logic: Favorites first, then by click count, then alphabetically
      const sortedTools = [...baseTools].sort((a, b) => {
          const aFav = favorites.includes(a.id) ? 1 : 0;
          const bFav = favorites.includes(b.id) ? 1 : 0;
          if (aFav !== bFav) return bFav - aFav;
          
          const aClicks = userStats[a.id] || 0;
          const bClicks = userStats[b.id] || 0;
          if (aClicks !== bClicks) return bClicks - aClicks;
          
          return a.title.localeCompare(b.title);
      });

      const filtered = sortedTools.filter(t => 
        t.title.toLowerCase().includes(query.toLowerCase()) || 
        t.tags.toLowerCase().includes(query.toLowerCase())
      );

      filtered.forEach(t => {
        const isFav = favorites.includes(t.id);
        const clicks = userStats[t.id] || 0;
        const card = document.createElement('div');
        card.className = "tool-card card";
        card.innerHTML = `
          <div class="card-header">
            <h3 class="card-title"><i class="fas ${t.icon}"></i> ${t.title}</h3>
            ${t.badge ? `<span class="badge badge-primary">${t.badge}</span>` : ''}
            <button class="fav-btn ${isFav ? 'active' : ''}" onclick="toggleFav('${t.id}', event)">
                <i class="fas fa-heart"></i>
            </button>
          </div>
          <p>${t.desc}</p>
          <button class="btn btn-primary" onclick="handleToolClick('${t.id}', '${t.link}')">Open Tool</button>
          ${clicks > 0 ? `<div class="stats-info">Used ${clicks} times</div>` : ''}
        `;
        grid.appendChild(card);
      });
    }

    search.addEventListener('input', (e) => displayTools(e.target.value));
    window.onload = () => displayTools();
  </script>
</body>
</html>